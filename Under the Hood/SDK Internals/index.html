
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../SDK%20Release%20Notes/Release%20Notes/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.3">
    
    
      
        <title>SDK Internals - Cawaena Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.260ed9e7.css">
        <style>:root{--md-text-font:"Exo 2";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sdk-internals" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Cawaena Docs" class="md-header__button md-logo" aria-label="Cawaena Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cawaena Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SDK Internals
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      

        
          
        
      


      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cawaena Docs" class="md-nav__button md-logo" aria-label="Cawaena Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Cawaena Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Choosing Cawaena
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Choosing Cawaena
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Choosing%20Cawaena/Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Choosing%20Cawaena/Features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Choosing%20Cawaena/Licensing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Licensing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Choosing%20Cawaena/Philosophy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Philosophy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Choosing Cryptpay
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Choosing Cryptpay
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Choosing%20Cryptpay/Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Choosing%20Cryptpay/Features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Choosing%20Cryptpay/Licensing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Licensing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Choosing%20Cryptpay/Philosophy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Philosophy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Installing the SDK
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Installing the SDK
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Installing%20the%20SDK/Installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Installing%20the%20SDK/JS_TS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Javascript/Typescript Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Installing%20the%20SDK/Java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Installing%20the%20SDK/Swift/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Swift Installation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    SDK Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            SDK Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SDK%20Configuration/Configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring the SDK
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    SDK Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            SDK Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SDK%20Examples/Examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    SDK Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            SDK Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SDK%20Modules/KYC%20Onboarding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KYC Onboarding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SDK%20Modules/Managing%20user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SDK%20Modules/Managing%20wallet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wallet management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SDK%20Modules/Transactions_Swaps_Purchases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transactions, Swaps and Purchases
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    SDK Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            SDK Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SDK%20Reference/SDK%20API%20Reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    SDK Release Notes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            SDK Release Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SDK%20Release%20Notes/Release%20Notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Under the Hood
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Under the Hood
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    SDK Internals
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    SDK Internals
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-of-the-sdk-functional-components" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of the SDK functional components
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#understanding-android-bindings" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding android bindings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding android bindings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-java-wrapper" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a java wrapper
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#futures-across-the-abi-boundary-in-java" class="md-nav__link">
    <span class="md-ellipsis">
      Futures across the ABI boundary in Java
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#understanding-swift-bindings" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding Swift bindings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding Swift bindings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generating-ios-xcframeworks" class="md-nav__link">
    <span class="md-ellipsis">
      Generating iOS xcframeworks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swift-package" class="md-nav__link">
    <span class="md-ellipsis">
      Swift package
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swift-bridge" class="md-nav__link">
    <span class="md-ellipsis">
      Swift-Bridge
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Swift-Bridge">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#built-in-types" class="md-nav__link">
    <span class="md-ellipsis">
      Built-in Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async-support" class="md-nav__link">
    <span class="md-ellipsis">
      async support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#header-files" class="md-nav__link">
    <span class="md-ellipsis">
      header files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hot-and-cold-wallets" class="md-nav__link">
    <span class="md-ellipsis">
      Hot and Cold wallets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hot and Cold wallets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hot-wallets-the-swift-side-of-crypto" class="md-nav__link">
    <span class="md-ellipsis">
      Hot Wallets: The Swift Side of Crypto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cold-wallets-embracing-the-fortress-of-security" class="md-nav__link">
    <span class="md-ellipsis">
      Cold Wallets: Embracing the Fortress of Security
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-iota-wallet" class="md-nav__link">
    <span class="md-ellipsis">
      The IOTA wallet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pin-and-password-in-the-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      Pin and password in the SDK
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertical-spreads" class="md-nav__link">
    <span class="md-ellipsis">
      Vertical spreads
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                

<!-- Include the remaining content -->

                  



<h1 id="sdk-internals">SDK Internals<a class="headerlink" href="#sdk-internals" title="Permanent link">&para;</a></h1>
<p>The Cawaena SDK is built in <code>rust</code>. It is primarily an implementation of the various interfaces for managing users, wallets, on-boarding of users through KYC (Know Your Customer) processes, payment methods and listing usage information.</p>
<p>The SDK was designed to support the <code>Cawaena</code> application. It is a social media application, which allows monetization of user-generated content. However, in the same principle, any digital data, given that it is authentic and its origin can be verified, can be monetized using the Cawaena ecosystem, which includes the Cawaena infrastructure and the sdk.</p>
<p>The big picture behind Cawaena is a data marketplace. Data processing, silo management and search engine features have been excluded by design from Cawaena to make it a minimal ecosystem for monetization.</p>
<h2 id="overview-of-the-sdk-functional-components">Overview of the SDK functional components<a class="headerlink" href="#overview-of-the-sdk-functional-components" title="Permanent link">&para;</a></h2>
<p>The figure below shows the functional component diagram of the SDK. The core of the SDK is a web3 hot-wallet. This wallet is used to store assets on the local machine running the application built with the SDK. The supporting components like the backend API, user state management and access control logic work for improving ease of use for the end user as well as ensuring correct process flow and state transitions between the Cawaena infrastructure and application.</p>
<p>The binding layer is just a simple 1-to-1 wrapper around the SDK interface functionality. This just exports the existing business logic implemented in the SDK in rust to other programming stacks to avoid re-implementation as well as guarantee memory safety natively in code.</p>
<p>The access control section at the bottom shows the input parameters needed from the user/application to authenticate itself against the SDK. For the one-time on-boarding in addition to the <code>pin</code> and <code>access_token</code> the <code>username</code> and <code>password</code> is also needed. For regular usage, the <code>pin</code>, whenever required and <code>access_token</code> is required to ensure smooth handling of operations, including internal function calls to the Cawaena infrastructure and the wallet.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>+-------------------------------------------------------------------------------+
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>|                                                                               |
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>|   +-----------------------------------------------------------------------+   |
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>|   |                                                                       |   |
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>|   |                                                                       |   |
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>|   |   +---------------------------------------------+    +--------------+ |   |
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>|   |   |                                             |    |              | |   |
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>|   |   |   +-------------------------------------+   |    |   Backend    | |   |
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>|   |   |   |                                     |   |    |   API        | |   |
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>|   |   |   |     +------------------------+      |   |    |              | |   |
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>|   |   |   |     |                        |      |   |    +--------------+ |   |
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>|   |   |   |     |                        |      |   |                     |   |
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>|   |   |   |     |                        |      |   |                     |   |
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>|   |   |   |     |       IOTA SDK         |      |   |    +--------------+ |   |
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>|   |   |   |     |                        |      |   |    |              | |   |
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>|   |   |   |     |       Stronghold       |      |   |    | User         | |   |
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>|   |   |   |     |         wallet         |      |   |    | State        | |   |
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>|   |   |   |     |         manager        |      |   |    | Management   | |   |
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>|   |   |   |     |                        |      |   |    +--------------+ |   |
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>|   |   |   |     +------------------------+      |   |                     |   |
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>|   |   |   |                                     |   |                     |   |
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>|   |   |   |           Wallet Manager            |   |    +--------------+ |   |
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>|   |   |   +-------------------------------------+   |    |              | |   |
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>|   |   |                                             |    |   Access     | |   |
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>|   |   |                Wallet User                  |    |   Control    | |   |
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>|   |   |                                             |    |   Logic      | |   |
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>|   |   +---------------------------------------------+    +--------------+ |   |
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>|   |                         SDK                                           |   |
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>|   +-----------------------------------------------------------------------+   |
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>|                           Bindings                                            |
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>|                                                                               |
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>|                                                                               |
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>+--+--------------------------------------+------+----------------------------+-+
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>   |      Onboarding authentication       |      |   Usage authentication     |  
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>   |                                      |      |                            |  
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>   +--^---------^-------^---------^-------+      +-----^-----------^----------+  
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>      |         |       |         |                    |           |             
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>      |         |       |         |                    |           |             
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>      |         |       |         |                    |           |             
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>   Username  Password  Pin    Access token            Pin      Access token      
</span></code></pre></div>
<h2 id="understanding-android-bindings">Understanding android bindings<a class="headerlink" href="#understanding-android-bindings" title="Permanent link">&para;</a></h2>
<p>The <code>libc++_shared.so</code> files are packaged together with the generated <code>*.so</code> files from cargo. These files are required by the corresponding system binary loader to correctly load the*.so files from the jniLibs folder using the convention</p>
<div class="language-Java highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">System</span><span class="p">.</span><span class="na">loadLibrary</span><span class="p">(</span><span class="s">&quot;library_name&quot;</span><span class="p">);</span>
</span></code></pre></div>
<p>The library should be named with the prefix <code>lib</code> and the suffix <code>.so</code>. This is how the libraries are created by cargo when specifying the <code>crate-type</code> as <code>cdylib</code>. If the <code>libc++_shared.so</code> files for the corresponding architecture are not included, loading the library works a bit differently, however this method is not portable across different platforms.</p>
<div class="language-Java highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">System</span><span class="p">.</span><span class="na">load</span><span class="p">(</span><span class="s">&quot;absolute/path/to/lib/with/library_name.so&quot;</span><span class="p">);</span>
</span></code></pre></div>
<h3 id="creating-a-java-wrapper">Creating a java wrapper<a class="headerlink" href="#creating-a-java-wrapper" title="Permanent link">&para;</a></h3>
<p>To support integration in java via a wrapper class, it is important to create the native methods in java and wrap them through a public method inside the class.</p>
<p>The convention followed by JNI is crucial here. The convention followed for declaring function names which are JNI compatible is: Java_{TLD}<em Class_name="Class_name">{Org_Name}</em>
where TLD = Top Level Domain
Org_Name = Organization name
Class_Name = Name of the class, whose method is private static and native.
function_Name = Name of the function}_{function_Name</p>
<p>Example:
In Java, for the function <code>setCurrencyJni</code>, the following code is needed</p>
<div class="language-Java highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">// filename: CryptpaySdk.java</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.etogruppe</span><span class="p">;</span><span class="w"> </span><span class="c1">// com is the TLD and etogruppe is the org_name</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CryptpaySdk</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Class_name</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">loadLibrary</span><span class="p">(</span><span class="s">&quot;walletsdk&quot;</span><span class="p">);</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">native</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setCurrencyJni</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">currency</span><span class="p">);</span><span class="w"> </span><span class="c1">// function_Name</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="c1">// other native functions here</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setCurrency</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">currency</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">        </span><span class="n">setCurrencyJni</span><span class="p">(</span><span class="n">currency</span><span class="p">);</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="p">}</span>
</span></code></pre></div>
<p>This would translate to a rust function as per the rule, with <code>no_mangle</code>, to tell the rust compiler to not mangle the function name in the resulting binary.</p>
<p>One point to note is not to use <code>snake_case</code> names of functions, because the JNI would deduce it as class path. <code>lowerCamelCase</code> or <code>CamelCase</code> is allowed.</p>
<div class="language-Rust highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1">// lib.rs</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="cp">#[no_mangle]</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="k">pub</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">&quot;system&quot;</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">Java_com_etogruppe_CryptpaySdk_setCurrencyJni</span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="n">env</span><span class="p">:</span><span class="w"> </span><span class="nc">JNIEnv</span><span class="o">&lt;&#39;</span><span class="na">local</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="n">_class</span><span class="p">:</span><span class="w"> </span><span class="nc">JClass</span><span class="o">&lt;&#39;</span><span class="na">local</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">      </span><span class="c1">// implementation</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<p>The two variables are passed by the JNI call to rust, namely the JNIEnv and the java class. The JClass is an empty place holders to satisfy the Java interface. The JNI environment is a constant pointer the JNI environment and can be used to call methods for checking and raising exceptions as shown below.</p>
<div class="language-Rust highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">// lib.rs</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">fn</span><span class="w"> </span><span class="nf">on_error_null</span><span class="p">(</span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">SdkError</span><span class="p">,</span><span class="w"> </span><span class="n">env</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">JNIEnv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="c1">// fearlessly doing unwraps here, because we are already in exception</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">env</span><span class="p">.</span><span class="n">exception_check</span><span class="p">().</span><span class="n">unwrap</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">        </span><span class="c1">// exception was raised,  clear it and raise again</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">        </span><span class="c1">// to return back to JVM</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">        </span><span class="n">env</span><span class="p">.</span><span class="n">exception_clear</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="n">env</span><span class="p">.</span><span class="n">throw</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">&quot;{error:#?}&quot;</span><span class="p">)).</span><span class="n">unwrap</span><span class="p">();</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="p">}</span>
</span></code></pre></div>
<p>It can also be used to get strings and other objects from the java native to rust safely and pass back rust strings as java string objects back. These methods are needed almost on every function call and return, and hence have been written as macros to reduce code repetitions.</p>
<div class="language-Rust highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">// lib.rs</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="fm">macro_rules!</span><span class="w"> </span><span class="n">get_jni_string</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="p">(</span><span class="cp">$env</span><span class="p">:</span><span class="nc">ident</span><span class="p">,</span><span class="w"> </span><span class="cp">$on_error</span><span class="p">:</span><span class="nc">ident</span><span class="p">,</span><span class="w"> </span><span class="cp">$input_string</span><span class="p">:</span><span class="nc">expr</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{{</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">jni_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="cp">$env</span><span class="p">.</span><span class="n">get_string</span><span class="p">(</span><span class="o">&amp;</span><span class="cp">$input_string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">            </span><span class="nb">Ok</span><span class="p">(</span><span class="n">jni_string</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="n">jni_string</span><span class="p">),</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">            </span><span class="nb">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">                </span><span class="kd">let</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdkError</span><span class="p">::</span><span class="n">UnhandledError</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">&quot;Invalid string input: {err:#}&quot;</span><span class="p">));</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">                </span><span class="cp">$on_error</span><span class="p">(</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="cp">$env</span><span class="p">);</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">                </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">        </span><span class="n">jni_string</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="p">}};</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="p">}</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="fm">macro_rules!</span><span class="w"> </span><span class="n">set_jni_string</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">    </span><span class="p">(</span><span class="cp">$env</span><span class="p">:</span><span class="nc">expr</span><span class="p">,</span><span class="w"> </span><span class="cp">$string</span><span class="p">:</span><span class="nc">expr</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="w">        </span><span class="cp">$env</span><span class="p">.</span><span class="n">new_string</span><span class="p">(</span><span class="cp">$string</span><span class="p">).</span><span class="n">unwrap</span><span class="p">()</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="futures-across-the-abi-boundary-in-java">Futures across the ABI boundary in Java<a class="headerlink" href="#futures-across-the-abi-boundary-in-java" title="Permanent link">&para;</a></h3>
<p>As noticed in the previous example of the rust function, the prefix <code>extern "system"</code> is used  to tell compiler some information on how the function is going to be called. The <code>extern</code> helps the compiler to know that the function will be called from outside of rust. The <code>system</code> describes the application binary interface (ABI) to use to define the function in binary code. With <code>system</code> the systems ABI is to be used. This ABI is defined by each system according to the target-triplet configured during the cargo build command.</p>
<p>As we will see later, we could also use <code>C</code> ABI to expose our functions using the <code>C</code> calling conventions in the binary interface. Based on the ABI selected, different applications running on the same host machine and using the same operating system can interact with each other through the binary layer for exchanging information or calling functions.</p>
<p>Unfortunately, on the binary layer there is no easy concept of futures, since there is no scheduler, which can periodically check if a result of a certain function call is available. Calling an external application function from another application is generally synchronous and the result is returned immediately. This means that for asynchronous function calls like HTTP requests, a blocking [sync] call has to be used by the external application and the calling application has to treat the function call as synchronous.</p>
<p>For the Cawaena SDK, there is a runtime thread started and used for calling the SDK functions, in this case, are all asynchronous. Using <code>OnceCell</code> this runtime thread is created on the first call to any SDK function and reused by all others.</p>
<div class="language-Rust highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1">// lib.rs</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">fn</span><span class="w"> </span><span class="nf">runtime</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="o">&#39;</span><span class="nb">static</span><span class="w"> </span><span class="nc">Arc</span><span class="o">&lt;</span><span class="n">Runtime</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">INSTANCE</span><span class="p">:</span><span class="w"> </span><span class="nc">OnceCell</span><span class="o">&lt;</span><span class="n">Arc</span><span class="o">&lt;</span><span class="n">Runtime</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OnceCell</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="n">INSTANCE</span><span class="p">.</span><span class="n">get_or_init</span><span class="p">(</span><span class="o">||</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">        </span><span class="n">Arc</span><span class="p">::</span><span class="n">new</span><span class="p">(</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">            </span><span class="n">tokio</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">Builder</span><span class="p">::</span><span class="n">new_multi_thread</span><span class="p">()</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">                </span><span class="p">.</span><span class="n">thread_name</span><span class="p">(</span><span class="s">&quot;com.standalone.sdk.thread&quot;</span><span class="p">)</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">                </span><span class="p">.</span><span class="n">worker_threads</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">                </span><span class="p">.</span><span class="n">enable_all</span><span class="p">()</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">                </span><span class="p">.</span><span class="n">build</span><span class="p">()</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">                </span><span class="p">.</span><span class="n">unwrap</span><span class="p">(),</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">        </span><span class="p">)</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">    </span><span class="p">})</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="p">}</span>
</span></code></pre></div>
<p>This results in a function definition without need of async await in the exposed interface, since currently there are no known ABI's that support this. The future is actively blocked on, thus making it synchronous.</p>
<div class="language-Rust highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">// lib.rs</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="c1">// async/await is not allowed in the function definition here. Is there any ABI that could do it?</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="cp">#[no_mangle]</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="k">pub</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">&quot;system&quot;</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">Java_com_etogruppe_CryptpaySdk_setPathPrefix</span><span class="o">&lt;&#39;</span><span class="na">local</span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="k">mut</span><span class="w"> </span><span class="n">env</span><span class="p">:</span><span class="w"> </span><span class="nc">JNIEnv</span><span class="o">&lt;&#39;</span><span class="na">local</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="n">_class</span><span class="p">:</span><span class="w"> </span><span class="nc">JClass</span><span class="o">&lt;&#39;</span><span class="na">local</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="n">path_prefix</span><span class="p">:</span><span class="w"> </span><span class="nc">JString</span><span class="o">&lt;&#39;</span><span class="na">local</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">path_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_jni_string</span><span class="o">!</span><span class="p">(</span><span class="n">env</span><span class="p">,</span><span class="w"> </span><span class="n">on_error_null</span><span class="p">,</span><span class="w"> </span><span class="n">path_prefix</span><span class="p">);</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">    </span><span class="n">runtime</span><span class="p">().</span><span class="n">block_on</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="k">move</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">      </span><span class="c1">// async/await can be done here as it is inside a thread which is &quot;blocked on&quot; i.e. synchronous</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">sdk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_or_init_sdk</span><span class="p">().</span><span class="n">write</span><span class="p">().</span><span class="k">await</span><span class="p">;</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">        </span><span class="n">sdk</span><span class="p">.</span><span class="n">set_path_prefix</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path_prefix</span><span class="p">)</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="p">}</span>
</span></code></pre></div>
<p>A nice way to solve this on the other side would be to wrap the native ABI calls in an interface which uses the futures framework of the used programming language (if available). So, the java class would now look something like this:</p>
<div class="language-Java highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">// filename: CryptpaySdk.java</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.etogruppe</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.Future</span><span class="p">;</span><span class="w"> </span><span class="c1">// get the future support from the language</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CryptpaySdk</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">loadLibrary</span><span class="p">(</span><span class="s">&quot;walletsdk&quot;</span><span class="p">);</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">native</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setCurrencyJni</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">currency</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span><span class="c1">// exposed class method now gives a future wrapped void and not just void!</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">setCurrency</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">currency</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">        </span><span class="n">setCurrencyJni</span><span class="p">(</span><span class="n">currency</span><span class="p">);</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="p">}</span>
</span></code></pre></div>
<p>Wrapping the exposed interface with a future, tells the application which builds on top of this external library function, that it is indeed asynchronous and can implement mechanisms to handle it correspondingly.</p>
<h2 id="understanding-swift-bindings">Understanding Swift bindings<a class="headerlink" href="#understanding-swift-bindings" title="Permanent link">&para;</a></h2>
<h3 id="generating-ios-xcframeworks">Generating iOS xcframeworks<a class="headerlink" href="#generating-ios-xcframeworks" title="Permanent link">&para;</a></h3>
<p>The iOS ecosystem allows developers to create xcframeworks, which are a distribution format that contains multiple architectures and platforms in a single bundle. The xcframeworks offer advantages such as improved performance, reduced app size, and easier distribution and integration.</p>
<p>Our xcframework structure is as following:</p>
<ul>
<li>CryptpaySdkBin.xcframework/</li>
<li>ios-arm64/<ul>
<li>Headers/</li>
<li>generated/<ul>
<li>Cawaena-sdk-swift-new/</li>
<li>Cawaena-sdk-swift-new.h</li>
<li>SwiftBridgeCore.h</li>
</ul>
</li>
<li>bridging-header.h</li>
<li>module.modulemap</li>
<li>libwalletsdk_cabi_new.a</li>
</ul>
</li>
<li>macos-arm64_x86_64/<ul>
<li>Headers/</li>
<li>generated/<ul>
<li>Cawaena-sdk-swift-new/</li>
<li>Cawaena-sdk-swift-new.h</li>
<li>SwiftBridgeCore.h</li>
</ul>
</li>
<li>bridging-header.h</li>
<li>module.modulemap</li>
<li>libwalletsdk_cabi_new.a</li>
</ul>
</li>
</ul>
<p>The creation can be done using the <code>xcodebuild</code> command, which takes the static library as input and an include section, which is actually a folder containing at most one module.modulemap file and any other C header files which describe the interface to the static library, assuming that it is C ABI.</p>
<p>The module map should include all the header files for working with the static library and re-export them as shown below.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>module CryptpaySdkBin {
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    header &quot;bridging-header.h&quot;
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    export *
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>}
</span></code></pre></div>
<p>The module name is important here. It needs to have the name of the package binary which in our case is <code>CryptpaySdkBin</code>.</p>
<p>The <code>bridging-header.h</code> file includes the auto-generated files from the <code>swift-bridge</code> crate which we explain in more details on the <code>header files</code> section below.</p>
<p>The <code>lipo</code> utility is used to re-arrange the Rust generated static library with binary information. It allows developers to combine multiple architectures into a single binary file.</p>
<p>Installing an xcframework in the iOS app development environment is simply done by dragging and dropping the xcframework file in xcode or importing it using the settings menu.</p>
<h3 id="swift-package">Swift package<a class="headerlink" href="#swift-package" title="Permanent link">&para;</a></h3>
<p>Previously we were bundling our Swift bindings into a <code>.zip</code> file and exporting it. This was not very practical for the users and also for us since we need to bundle, download it and give it to our users manually. Instead, we want to offer it as a package. In this version we generate a Swift package instead which can be imported as a dependency. The structure of our Swift package is as following:</p>
<ul>
<li>CryptpaySdk/</li>
<li>CryptpaySdkBin.xcframework/</li>
<li>Sources/<ul>
<li>CryptpaySdk/</li>
<li>SwiftBridgeCore.swift</li>
<li>Cawaena-sdk-swift-new.swift</li>
<li>vectorizable.swift</li>
</ul>
</li>
<li>Package.swift</li>
</ul>
<p>The <code>CryptpaySdkBin.xcframework</code> creation and its internal structure is explained in the above <code>Generating iOS xcframeworks</code> section. The <code>SwiftBridgeCore.swift</code> and <code>Cawaena-sdk-swift-new.swift</code> files are auto-generated by the <code>swift-bridge</code> crate.  </p>
<p>The <code>vectorizable.swift</code> contains custom implementations for Rust types which cannot be bridged directly to Swift. For example the <code>Vec&lt;KycOpenDocument</code> type needs to implement the <code>Vectorizable</code> to compile in Swift. This is due to some limitations on the crate which need some workaround to compile properly.  </p>
<p>Finally, the <code>Package.swift</code> is the actual file that generates the Swift package called <code>CryptpaySdk</code>. In xcode we can add the CryptpaySdk packge and initialize the constructor and call its functions (our Rust bindings):  </p>
<div class="language-Swift highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="w">  </span><span class="kd">import</span><span class="w"> </span><span class="nc">CryptpaySdk</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nv">sdk</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">CryptpaySdk</span><span class="p">()</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">sdk</span><span class="p">.</span><span class="n">setEnvironment</span><span class="p">(</span><span class="s">&quot;development&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="swift-bridge">Swift-Bridge<a class="headerlink" href="#swift-bridge" title="Permanent link">&para;</a></h3>
<p>We are using the <a href="https://crates.io/crates/swift-bridge"><code>swift-bridge</code></a> crate to generate the Swift bindings.</p>
<h4 id="built-in-types">Built-in Types<a class="headerlink" href="#built-in-types" title="Permanent link">&para;</a></h4>
<p>The <code>swift-bridge</code> crate uses the <code>#[swift_bridge::bridge]</code> procedural macro to declare a bridge module. This macro parses the bridge module at compile time and then generates the Rust side of the FFI layer. The bridge module is declared inside the <code>lib.rs</code> module.</p>
<div class="language-Rust highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="cp">#[swift_bridge::bridge]</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">pub</span><span class="w"> </span><span class="k">mod</span><span class="w"> </span><span class="nn">ffi</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="nc">UserState</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">        </span><span class="n">Undefined</span><span class="p">,</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">        </span><span class="n">New</span><span class="p">,</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">        </span><span class="n">Verified</span><span class="p">,</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">        </span><span class="n">Locked</span><span class="p">,</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">        </span><span class="n">Unlocked</span><span class="p">,</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">    </span><span class="k">extern</span><span class="w"> </span><span class="s">&quot;Rust&quot;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">        </span><span class="cp">#[swift_bridge(swift_name = </span><span class="s">&quot;getUserState&quot;</span><span class="cp">)]</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">        </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">get_user_state</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">UserState</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="p">}</span>
</span></code></pre></div>
<p>For the above function it will generate the following C ABI in the backgroud, which will make the bridge with Swift possible:</p>
<div class="language-Rust highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">pub</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">__swift_bridge__CryptpaySdk_get_user_state</span><span class="p">(</span><span class="n">callback_wrapper</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="k">mut</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">ffi</span><span class="p">::</span><span class="n">c_void</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">:</span><span class="w"> </span><span class="nc">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="k">fn</span><span class="p">(</span><span class="o">*</span><span class="k">mut</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">ffi</span><span class="p">::</span><span class="n">c_void</span><span class="p">,</span><span class="w"> </span><span class="n">ResultUserStateAndString</span><span class="p">),</span><span class="w"> </span><span class="n">this</span><span class="p">:</span><span class="w"> </span><span class="o">*</span><span class="k">mut</span><span class="w"> </span><span class="k">super</span><span class="p">::</span><span class="n">CryptpaySdk</span><span class="p">)</span>
</span></code></pre></div>
<p>In the <code>java</code> bindings we serialize any complex return values into JSON and return a <code>String</code>. We also take enum variants as <code>Strings</code> and perform conversion internally.  </p>
<p>The <code>swift-bridge</code> crate supports sharing standard library types between Rust and Swift. We can return <code>Result</code> or <code>Option</code> types in the response which can contain a complex type such as a <code>struct</code> or <code>enum</code>. These types can ba used in the response and also as function arguments. In our case, we always return a <code>Result</code> type and on the <code>Err</code> case we are returning a formatted <code>String</code> of the internal SDK error.</p>
<p>The swift-bridge allows this if we declare shared types between Rust and Swift in the bridge module as shown in the example above with the <code>UserState</code> enum.</p>
<p>Additionally, we should write the conversion between these types. In our case we have developed a helper macro for generating the <code>From</code> implementations for enums and structs. In other cases we do the conversion manually, depending on the use case and limitations.</p>
<div class="language-Rust highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">convert_enum</span><span class="o">!</span><span class="p">(</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span><span class="n">sdk</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">users</span><span class="p">::</span><span class="n">UserState</span><span class="p">,</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="n">ffi</span><span class="p">::</span><span class="n">UserState</span><span class="p">,</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="n">Undefined</span><span class="p">,</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="n">New</span><span class="p">,</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="n">Verified</span><span class="p">,</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="n">Locked</span><span class="p">,</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="n">Unlocked</span><span class="p">,</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="p">);</span>
</span></code></pre></div>
<p>There are still some limitations with this library to passing some complex types and require some adaptations to work out. For example, the <code>Option&lt;String&gt;</code> type is not supported in return structs. In this case, the workaround would be to use <code>.unwrap_or("".to_string())</code> on the Option value. It attempts to unwrap the <code>Option</code> that comes from the SDK and get the <code>String</code> value. Otherwise, if the unwrap fails, meaning we get a <code>None</code> value, it returns an empty <code>String</code> which would be equivalent to the <code>None</code> value. For more information regarding the supported build-in types refer to the official <a href="" title="https://chinedufn.github.io/swift-bridge/built-in/index.html">documentation</a> of <code>swift-bridge</code> crate.  </p>
<h4 id="async-support">async support<a class="headerlink" href="#async-support" title="Permanent link">&para;</a></h4>
<p>As we can see from the example above, the <code>swift-bridge</code> library supports <code>async/await</code> functions between Swift and Rust. Calling an async Rust function from Swift is supported. Calling an async Swift function from Rust is not yet supported. In our case, we are exporting async functions from Rust to Swift, which is supported. Therefore we do not need to embedd a runtime (such as <code>tokio</code>) ourselves!</p>
<p>At build time, on the background, it runs <code>swift-bridge-build</code> on files that contain bridge modules in order to generate the Swift and C code necessary to make the bridge work.</p>
<h4 id="header-files">header files<a class="headerlink" href="#header-files" title="Permanent link">&para;</a></h4>
<p>The <code>swift-bridge</code> crate along with <code>build.rs</code> is used to create the header files from the source code directly. Although one could write these header files by hand, but for a SDK with many functions, it makes sense to automate it for avoiding errors and missing out any functions.</p>
<p>The <code>build.rs</code> links Swift to the Rust native library. Aside the header files, it generates also the Swift files.  </p>
<p>It parses the Rust source files for <code>#[swift_bridge::bridge]</code> procedural macro headers and generates the corresponding Swift files. It then writes the auto-generated files to a single Swift file and all of the generated C headers to a single header file. These files are generated under the <code>/include</code> folder so that it can become a part of the xcframework without moving or copying it.  </p>
<p>This is what the auto-generated header files structure look like:  </p>
<ul>
<li>generated/</li>
<li>Cawaena-sdk-swift-new/<ul>
<li>Cawaena-sdk-swift-new.h</li>
<li>Cawaena-sdk-swift-new.swift</li>
</ul>
</li>
<li>SwiftBridgeCore.h</li>
<li>SwiftBridgeCore.swift</li>
</ul>
<h2 id="hot-and-cold-wallets">Hot and Cold wallets<a class="headerlink" href="#hot-and-cold-wallets" title="Permanent link">&para;</a></h2>
<p>Users today maintain their crypto-currencies in wallets. A wallet is purely software coupled with a secret store, from which the addresses are deterministically derived from a single seed using hierarchical deterministic procedure. For more information, see <a href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki">BIP-0032</a>. The actual tokens/coins of the cryptocurrency reside on these address. Thus, in reality, the wallet is a method of accessing and controlling the crypto-currency, which in turn always lies on the network and never in a hardware or in the typical sense inside a wallet.</p>
<p>Since, the wallet has two components, the software and the storage, this allows to classify the wallet based on how these components are implemented and in which environment, specifically under whose control, these components are running/installed. The wallet matrix is shown as below:</p>
<table>
<thead>
<tr>
<th>Environment</th>
<th>Software</th>
<th>Storage</th>
</tr>
</thead>
<tbody>
<tr>
<td>User/Individual</td>
<td>Cold/Hot-Wallet</td>
<td>Non-custodial</td>
</tr>
<tr>
<td>Exchange/Business</td>
<td>Hot-Wallet</td>
<td>Custodial</td>
</tr>
</tbody>
</table>
<p>Users use cold non-custodial wallets to keep access and control over their secret seeds, which effectively give them control over their keys. Some users also use hot custodial wallets to efficiently trade cryptocurrencies at exchanges and participate in various decentralized finance (DeFi) protocols like lending pools, swaps, staking, etc.</p>
<p>A well-informed and researched user will temporarily maintain hot custodial wallets to engage with the chain and market and permanently maintain a major chunk of funds to addresses controlled by the non-custodial cold wallet. The user will then shuffle between the two wallets based on funds risk.</p>
<h3 id="hot-wallets-the-swift-side-of-crypto">Hot Wallets: The Swift Side of Crypto<a class="headerlink" href="#hot-wallets-the-swift-side-of-crypto" title="Permanent link">&para;</a></h3>
<p>Picture a hot wallet as the bustling city centre of your digital finances. Hot wallets are online, connected to the internet, and readily available for transactions. They provide users with quick access to their cryptocurrencies, making them ideal for active trading and daily transactions. Think of them as your go-to pocket wallet for everyday spending in the digital realm.</p>
<p>However, convenience comes at a cost. The very connectivity that makes hot wallets user-friendly also renders them more vulnerable to cyber threats. Hacking attempts and online attacks pose a constant risk, making it crucial for users to exercise caution and implement additional security measures when relying on hot wallets.</p>
<h3 id="cold-wallets-embracing-the-fortress-of-security">Cold Wallets: Embracing the Fortress of Security<a class="headerlink" href="#cold-wallets-embracing-the-fortress-of-security" title="Permanent link">&para;</a></h3>
<p>Now, shift your focus to the serene fortress nestled away from the hustle and bustle  the cold wallet. Unlike their hot counterparts, cold wallets remain offline and disconnected from the internet. This deliberate isolation provides a higher level of security, shielding your digital assets from the prying eyes of online threats.</p>
<p>Cold wallets are the guardians of large sums of cryptocurrency, often employed for long-term storage. While they may not offer the immediacy of hot wallets, their offline nature makes them an attractive option for those prioritizing the safety and longevity of their crypto investments.</p>
<h2 id="the-iota-wallet">The IOTA wallet<a class="headerlink" href="#the-iota-wallet" title="Permanent link">&para;</a></h2>
<p>The wallet used within the SDK is the official wallet developed by the IOTA Foundation and maintained in its own SDK found <a href="https://github.com/iotaledger/iota-sdk">here</a>. The wallet internally uses the stronghold secret management engine also developed by the IOTA Foundation found <a href="https://github.com/iotaledger/stronghold.rs">here</a>. The secret management engine not only stores sensitive data in files but also uses obfuscation and mechanisms against memory dumps to protect the secrets while they are being operated upon in the memory. Stronghold also provides functions for BIP-0032 derivation using the BIP-0044 derivation path mechanism described <a href="https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki">here</a>. The word list used by the wallet is the word list described in BIP-0039 <a href="https://raw.githubusercontent.com/bitcoin/bips/master/bip-0039/english.txt">here</a>.</p>
<p>The various coin types supported by BIP-0044 can be found in the list <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md">here</a>. Both <code>IOTA</code> and <code>SMR</code> are supported and have the coin types <code>4218</code> and <code>4219</code> respectively.</p>
<p>Currently, in its base implementation the IOTA SDK also needs an in-memory key-value store to manage some metadata related to the stronghold engine and other wallet settings. The IOTA SDK uses a rocksdb implementation in rust for this purpose. There are a few noteworthy problems with rocksdb:</p>
<ul>
<li>rocksdb is not light-weight for mobile end devices and the resulting binaries of the sdk take long to build and are bigger in storage requirements.</li>
<li>rocksdb does not support all mobile platforms</li>
<li>rocksdb is not maintained on the latest sdks of the android and iOS mobile platforms</li>
</ul>
<p>After investigation, it was found that the in-memory key-value store was used only for storing some metadata keys and not necessarily need high-performance query execution. Luckily, the IOTA SDK implemented the rocksdb connection as a <code>Storage</code> trait. Since, the SDK already used jammdb for its internal key-value store, a fork was created and the trait was implemented using <code>jammdb</code>. A pull request was created to the upstream, but the dev team at IOTA Foundation recommended to maintain the fork for now, as there would be some new breaking changes coming and the pull request can be created at a later point. The fork is updated regularly and maintained <a href="https://github.com/mighty840/iota-sdk">here</a>.</p>
<h2 id="pin-and-password-in-the-sdk">Pin and password in the SDK<a class="headerlink" href="#pin-and-password-in-the-sdk" title="Permanent link">&para;</a></h2>
<p>Generally, the password requirements for any application need to meet today's standards. This might become difficult for the user to remember their wallet stronghold password and also an irritating experience to enter it every time even for the smallest of transactions. On the other side, for a secure wallet application, the SDK should not rely on the interfacing application to do password management for a secret manager used internally. This has a lot of side effects, such as, the application might bypass the SDK logic for protecting access to the secret by simply using the password against the file, with no knowledge of the SDK. This is a security risk and cannot be accepted.</p>
<p>The end devices today support pin entry mostly protected by biometric authentication for ease but secure user experience, when it comes to accessing a restricted OS functionality. Taking all this in account, the SDK was designed to provide the end users possibilities to set up their wallet using a password and a pin.</p>
<p>The password stays with the SDK in an encrypted form and only the pin can be used to decrypt it. Thus, for every operation with the secret manager, where a password is needed, the user must only enter the pin, or allow the application to fetch it through bio-metrically protected secure storages on end devices. This solves the problem of user experience.</p>
<p>The issue of password management is also solved, since now the SDK internally manages the password, while still relying completely on the user to unblock it using the pin. The SDK cannot act in its own interest even if there was a malicious code trying to unblock the wallet! The probability distribution of the pin, being relatively weak, (4 to 6 digit), is improved through the addition of a pseudo random salt, which in combination with a hash function results in an encryption password of significant strength and quasi-random probability distribution. This is used then to encrypt the password for the secret manager.</p>
<p>Thus an attacker would need information on the salt, the encrypted password, pin and the stronghold file to be able to gain access to the wallet functions. This is tough and would need somehow physical access to the end device, and to the end user. Security of end-user and their devices is out of the scope for Cawaena ecosystem.</p>
<h2 id="vertical-spreads">Vertical spreads<a class="headerlink" href="#vertical-spreads" title="Permanent link">&para;</a></h2>
<p>A vertical spread in the context of exchange rates between two currencies for a crypto exchange refers to the price difference (spread) between the bid and ask prices of a particular cryptocurrency pair.</p>
<p>In a vertical spread, the bid price represents the highest price that a buyer is willing to pay for a specific cryptocurrency, while the ask price represents the lowest price at which a seller is willing to sell the same cryptocurrency. The vertical spread is the numerical difference between these two prices.</p>
<p>For example, let's say the bid price for Bitcoin (BTC) against US Dollar (USD) is $50,000 and the ask price is $50,100. The vertical spread in this case would be $100 ($50,100 - $50,000).</p>
<p>Vertical spreads are significant for traders and investors because they indicate liquidity and market depth. A narrow spread suggests a highly liquid market with many buyers and sellers, whereas a wide spread may indicate lower liquidity and potentially higher transaction costs. Traders often look for tight vertical spreads when executing trades to minimize costs and ensure efficient transactions.</p>
<p>If an exchange offers no vertical spread, it means that the bid and ask prices for a particular cryptocurrency pair are identical or extremely close to each other. Essentially, there is no difference between the highest price a buyer is willing to pay (bid price) and the lowest price a seller is willing to accept (ask price).</p>
<p>Having no vertical spread implies high liquidity and efficiency in the market. It indicates that there are many buyers and sellers actively trading the cryptocurrency pair, resulting in competitive pricing and minimal transaction costs for traders.</p>
<p>Exchanges that offer no vertical spread are highly desirable for traders because they allow for instant execution of trades at fair market prices without incurring significant costs associated with spreads. This can contribute to a smoother trading experience and better opportunities for traders to enter and exit positions efficiently.</p>
<p>Viviswap takes the burden of the vertical spread on itself by ensuring highest liquidity always! (Tough to achieve)</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 10, 2025</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 10, 2025</span>
  </span>

    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:s.parnerkar@etogruppe.com">Sharang Parnerkar</a>
    </nav>
  </span>

    
    
  </aside>





                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../SDK%20Release%20Notes/Release%20Notes/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Release Notes">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Release Notes
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 -  ETO GRUPPE TECHNOLOGIES GmbH
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://cawaena.com/#/main/imprint" target="_blank" rel="noopener" title="Imprint" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M312 201.8c0-17.4 9.2-33.2 19.9-47C344.5 138.5 352 118.1 352 96c0-53-43-96-96-96s-96 43-96 96c0 22.1 7.5 42.5 20.1 58.8 10.7 13.8 19.9 29.6 19.9 47 0 29.9-24.3 54.2-54.2 54.2H112C50.1 256 0 306.1 0 368c0 20.9 13.4 38.7 32 45.3V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-50.7c18.6-6.6 32-24.4 32-45.3 0-61.9-50.1-112-112-112h-33.8c-29.9 0-54.2-24.3-54.2-54.2M416 416v32H96v-32z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:s.parnerkar@etogruppe.com" target="_blank" rel="noopener" title="Contact Us" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg>
    </a>
  
    
    
    
    
    <a href="https://discord.gg/ppNGRFsV" target="_blank" rel="noopener" title="Cawaena Discord channel" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            





<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.sections", "navigation.path", "navigation.prune", "toc.follow", "toc.integrate", "navigation.top", "navigation.footer", "content.code.copy", "content.code.select", "content.code.annotate", "content.footnote.tooltips", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../assets/external/unpkg.com/mermaid@11/dist/mermaid.min.js"></script>
      
    
  </body>
</html>